#!/bin/bash
# Script de instalaciÃ³n robusto para MechBot 2.0x

echo "ğŸ”§ Instalando MechBot 2.0x..."

# Verificar Python
if ! command -v python3 &> /dev/null; then
    echo "âŒ Python 3 no estÃ¡ instalado"
    exit 1
fi

# Crear entorno virtual
echo "ğŸ“¦ Creando entorno virtual..."
python3 -m venv venv

# Activar entorno virtual
echo "ğŸ”§ Activando entorno virtual..."
source venv/bin/activate

# Verificar que estamos en el entorno virtual
if [[ "$VIRTUAL_ENV" == "" ]]; then
    echo "âŒ No se pudo activar el entorno virtual"
    exit 1
fi

# Instalar pip actualizado
echo "ğŸ”„ Actualizando pip..."
pip install --upgrade pip

# Instalar dependencias
echo "ğŸ“¦ Instalando dependencias..."
pip install fastapi==0.104.1 uvicorn==0.24.0 python-jose==3.3.0

# Instalar el resto de dependencias
if [ -f "requirements.txt" ]; then
    pip install -r requirements.txt
else
    echo "âš ï¸  requirements.txt no encontrado, instalando dependencias bÃ¡sicas..."
    pip install pydantic python-dotenv requests numpy pandas
fi

echo "âœ… InstalaciÃ³n completada!"
echo "ğŸš€ Para ejecutar: source venv/bin/activate && uvicorn api.main:app --reload"
